<?php
$cgxLines = array();
$tmp_str = "";
$tabs = 0;
$last_char = "";
$str_started = False;

fscanf(STDIN, "%d", $N);
for ($i = 0; $i < $N; $i++)
{
    $cgxLine = stream_get_line(STDIN, 1000 + 1, "\n");
    array_push($cgxLines, "$cgxLine");
}

function check_next_line($char, $last_char)
{
    global $tabs;
    global $tmp_str;
    if ($last_char == ')' && $char != ';' && $char != ')' && $char != '(')
    {
        $tmp_str .= "\n" . str_repeat("    ", $tabs);
    }
    elseif ($last_char == '(' && $char != ")")
    {
        $tmp_str .= "\n" . str_repeat("    ", $tabs);
    }
    elseif ($last_char == ";")
    {
        $tmp_str .= "\n" . str_repeat("    ", $tabs);
    }
    elseif ($last_char == "=" && $char == "(")
    {
        $tmp_str .= "\n" . str_repeat("    ", $tabs);
    }
}

#print_r($cgxLines);
foreach ($cgxLines as $line)
{
    $line = str_split($line);
    foreach ($line as $char)
    {
        if ($char == "'" && $str_started == False)
        {
            check_next_line($char, $last_char);
            $str_started = True;
            $tmp_str .= $char;
        }
        elseif ($char == "'" && $str_started == True)
        {
            $str_started = False;
            $tmp_str .= $char;
        }
        elseif ($str_started == True)
        {
            $tmp_str .= $char;
        }
        elseif ($char == " ")
        {
            continue;
        }
        else
        {
            check_next_line($char, $last_char);
            if ($char == "(")
            {
                $tmp_str .= $char;
                $tabs += 1;
            }
            elseif ($char == ")")
            {
                $tabs -= 1;
                $tmp_str .= "\n" . str_repeat("    ", $tabs) . ")";
            }
            else
            {
                $tmp_str .= $char;
            }
        }
        $last_char = $char;
    }
}

echo $tmp_str;

#('key'='value')
?>
